import e,{useState as t,useRef as n,useEffect as r}from"react";import o from"prop-types";import{FaAlignRight as i}from"react-icons/fa";import"socket.io-client";function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}s(".king-ui-btn{background:var(--theme-background);color:var(--theme-color);border:var(--theme-border-width) var(--theme-border-style) var(--theme-border-color);border-radius:var(--theme-border-radius);font-size:unset;font-family:unset;cursor:pointer;user-select:none;padding:.35em .5em .2em}.king-ui-btn:hover{background:var(--theme-special--hover)}.king-ui-btn:active{background:var(--theme-special--active)}.king-ui-btn:focus{outline:0}.king-ui-btn--disabled{color:var(--theme-color--disabled);border-color:var(--theme-border-color--disabled);cursor:default}.king-ui-btn--disabled,.king-ui-btn--disabled:active,.king-ui-btn--disabled:hover{background:var(--theme-background--disabled)}");const l=({style:t,className:n,shadow:r,disabled:o,children:i,...s})=>{const l=["king-ui-btn",o?"king-ui-btn--disabled":"",n||""];return e.createElement("button",a({style:{boxShadow:r?o?"var(--theme-box-shadow--disabled)":"var(--theme-box-shadow)":"none",...t},className:l.join(" "),disabled:o},s),i)};l.propTypes={style:o.object,className:o.array,shadow:o.bool,disabled:o.bool,children:o.oneOfType([o.arrayOf(o.object.node),o.node.isRequired])};s("");const d=()=>e.createElement(e.Fragment,null);d.propTypes={};s('.king-ui-input input[type=number]::-webkit-inner-spin-button,.king-ui-input input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.king-ui-input input:focus{outline:0}.king-ui-input input:focus+span,.king-ui-input input:not([value=""])+span{transform:translateY(-1.5em)}');const c=({style:t,className:n,fontSize:r,shadow:o,underline:i,disabled:s,children:l,...d})=>e.createElement("span",a({style:{fontSize:r||"none",fontFamily:"unset",color:s?"var(--theme-color--disabled)":"var(--theme-color)",textDecoration:i?"underline":"none",textShadow:o?s?"var(--theme-text-shadow--disabled)":"var(--theme-text-shadow)":"none",...t},className:n},d),l);c.propTypes={style:o.object,className:o.string,fontSize:o.string,shadow:o.bool,underline:o.bool,disabled:o.bool,children:o.oneOfType([o.arrayOf(o.object.node),o.node.isRequired])};const u=({style:t,className:n,type:r,value:o,text:i,fontSize:s,onChange:l,...d})=>e.createElement("div",{style:{display:"flex",position:"relative",flexDirection:"column",textAlign:"center",padding:"1.2em 0 .2em 0",fontSize:s,fontFamily:"unset",...t},className:`king-ui-input ${n}`},e.createElement("input",a({style:{width:"100%",textAlign:"center",fontSize:"1em",fontFamily:"unset",border:"none",borderBottom:"var(--theme-border-width) var(--theme-border-style) var(--theme-border-color)",borderRadius:"var(--theme-border-radius)",background:"var(--theme-input-background)",color:"var(--theme-input-color)"},type:r,value:o,onChange:l},d)),e.createElement(c,{style:{position:"absolute",pointerEvents:"none",width:"100%",top:"50%",transition:"transform .25s ease",fontSize:".9em"},shadow:!!o||(0===o||!1)},i));u.defaultProps={fontSize:"unset",type:"text"},u.propTypes={style:o.object,className:o.string,type:o.string,value:o.oneOfType([o.string,o.number]),text:o.string,fontSize:o.string,onChange:o.func};const m=()=>{let e=window.screen.availHeight;return e=window.screen.availWidth<e?window.screen.availWidth:window.screen.availHeight,e/1080>1?e/1080*16+"px":e/1080*16*(e/1080*2.5<=1?2.5:1)+"px"},p=({style:t,className:n,fontSize:r,children:o,...i})=>e.createElement("div",a({style:{position:"relative",userSelect:"none",background:"unset",color:"unset",fontSize:r||m(),fontFamily:"unset",...t},className:n},i),o);p.propTypes={style:o.object,className:o.string,fontSize:o.string,children:o.oneOfType([o.arrayOf(o.object.node),o.node.isRequired])};const f=["NavMenuBar","NavMenuOverlay","NavMenuRelative"],y=({style:o,className:i,zIndex:a,fontSize:s,shadow:d,position:c,offset:u,icon:m,toggleMenu:p,children:y})=>{const[b,g]=t(p),h=n(!0),v={tr:{top:u,right:u},tl:{top:u,left:u},br:{bottom:u,right:u},bl:{bottom:u,left:u}};if(y&&f.includes(y.displayName))throw new Error(`Invalid child for "Nav", expect one of '${f.join("', '")}'`);return r((()=>{h.current?h.current=!1:g((e=>!e))}),[p]),e.createElement(e.Fragment,null,b&&y,e.createElement(l,{style:{position:"fixed",zIndex:a,fontSize:s||"unset",fontFamily:"unset",...v[c],...o},className:i,shadow:d,onClick:()=>g((e=>!e))},m))};y.defaultProps={position:"tr",offset:".5em",zIndex:500,fontSize:"1em",icon:e.createElement(i,{style:{fontSize:"none"}}),toggleMenu:!1},y.propTypes={style:o.object,className:o.string,zIndex:o.number,fontSize:o.string,shadow:o.bool,position:o.oneOf(["tr","tl","bl","br"]),offset:o.string,icon:o.node.isRequired,toggleMenu:o.bool,children:o.node};const b=({style:t,className:n,zIndex:r,space:o,children:i})=>e.createElement("div",{style:{display:"flex",position:"fixed",zIndex:r,flexDirection:"column",justifyContent:"center",alignItems:"center",fontSize:"unset",fontFamily:"unset",background:"var(--theme-nav-background)",top:0,left:0,width:"100vw",height:"100vh",...t},className:n},i instanceof Array?i.map(((t,n)=>e.createElement("div",{key:n,style:{padding:o}},t))):i);b.defaultProps={zIndex:500,space:"1em"},b.propTypes={style:o.object,className:o.string,zIndex:o.number,space:o.string,children:o.oneOfType([o.arrayOf(o.node.isRequired),o.node.isRequired])};const g=({active:o,children:i})=>{const[a,s]=t(),l=n([]);return r((()=>{l.current=i instanceof Array?i:[i]}),[i]),r((()=>[s((()=>l.current.filter((e=>e.props.route===o))))]),[o]),e.createElement(e.Fragment,null,a)};g.propTypes={active:o.string.isRequired,children:o.oneOfType([o.arrayOf(o.node.isRequired),o.node.isRequired])};const h=({endpoint:e,event:t,callback:n})=>(r((async()=>{}),[e,t,n]),null);h.defaultProps={endpoint:o.oneOfType([o.arrayOf(o.string),o.string]),selector:o.oneOfType([o.arrayOf(o.string),o.string]),event:o.string,callback:o.func};s(".king-ui-notify--error,.king-ui-notify--info,.king-ui-notify--warn{display:flex;flex-direction:column;padding:.25rem;margin:.1rem}");const v={},k={info:"king-ui-notify--info king-ui-card--info",warn:"king-ui-notify--warn king-ui-card--warn",error:"king-ui-notify--error kinf-ui-card--error"},w=({className:t,card:n,timeout:o,onClick:i,...s})=>(r((()=>{setTimeout((()=>{}),o)}),[o]),e.createElement("div",a({style:{display:"flex",flexDirection:"column"},className:t,onClick:i},s),n.title&&e.createElement(c,{style:{margin:".5em"},fontSize:"1.3em",shadow:!0,underline:!0},n.title),n.message&&e.createElement(c,{style:{margin:".5em"},fontSize:".9em"},n.message)));w.propTypes={className:o.string,card:o.object,timeout:o.number,onClick:o.func};const x=({title:t=null,message:n,level:r="info",id:o="king-ui-notify",props:i={}}={})=>{const a=k[r];if(!a)throw new Error(`Unknown level "${r}"`);const s=v[o].cards.current.length,l={id:s,title:t,message:n};v[o].addCard(e.createElement(w,{cardid:s,key:s,className:a,card:l,timeout:6e3,onClick:()=>v[o].removeCard(s)}))},z=({id:o})=>{const i=t(!1)[1],a=n([]),s=n(null);return r((()=>(v[o]={container:s,addCard:e=>{a.current.unshift(e),i((e=>!e))},cards:a,removeCard:e=>{let t=-1;for(const n of a.current)if(t++,n.props.cardid===e)break;a.current.splice(t,1),i((e=>!e))}},()=>{delete v[o]})),[o]),e.createElement("div",{id:o,style:{display:a.current.length?"flex":"none",position:"absolute",flexDirection:"column",top:"0",left:"0",overflowY:"auto",zIndex:999},ref:s},a.current)};z.defaultProps={id:"king-ui-notify"},z.propTypes={id:o.string};export{l as Button,h as IOService,u as Input,y as Nav,b as NavMenuOverlay,z as NotifyContainer,p as Root,g as Router,c as Text,d as ToggleSwitch,x as notify};
