"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("prop-types"),n=require("react-icons/fa");function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("socket.io-client");var r=a(e),o=a(t);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function l(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var a=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&a.firstChild?a.insertBefore(r,a.firstChild):a.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}l(".king-ui-btn{background:var(--theme-background);color:var(--theme-color);border:var(--theme-border-width) var(--theme-border-style) var(--theme-border-color);border-radius:var(--theme-border-radius);font-size:unset;font-family:unset;cursor:pointer;user-select:none;padding:.35em .5em .2em}.king-ui-btn:hover{background:var(--theme-special--hover)}.king-ui-btn:active{background:var(--theme-special--active)}.king-ui-btn:focus{outline:0}.king-ui-btn--disabled{color:var(--theme-color--disabled);border-color:var(--theme-border-color--disabled);cursor:default}.king-ui-btn--disabled,.king-ui-btn--disabled:active,.king-ui-btn--disabled:hover{background:var(--theme-background--disabled)}");const d=({style:e,className:t,shadow:n,disabled:a,children:o,...l})=>{const d=["king-ui-btn",a?"king-ui-btn--disabled":"",t||""];return r.default.createElement("button",i({style:{boxShadow:n?a?"var(--theme-box-shadow--disabled)":"var(--theme-box-shadow)":"none",...e},className:d.join(" "),disabled:a},l),o)};d.propTypes={style:o.default.object,className:o.default.array,shadow:o.default.bool,disabled:o.default.bool,children:o.default.oneOfType([o.default.arrayOf(o.default.object.node),o.default.node.isRequired])};l("");const s=()=>r.default.createElement(r.default.Fragment,null);s.propTypes={};l('.king-ui-input input[type=number]::-webkit-inner-spin-button,.king-ui-input input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.king-ui-input input:focus{outline:0}.king-ui-input input:focus+span,.king-ui-input input:not([value=""])+span{transform:translateY(-1.5em)}');const u=({style:e,className:t,fontSize:n,shadow:a,underline:o,disabled:l,children:d,...s})=>r.default.createElement("span",i({style:{fontSize:n||"none",fontFamily:"unset",color:l?"var(--theme-color--disabled)":"var(--theme-color)",textDecoration:o?"underline":"none",textShadow:a?l?"var(--theme-text-shadow--disabled)":"var(--theme-text-shadow)":"none",...e},className:t},s),d);u.propTypes={style:o.default.object,className:o.default.string,fontSize:o.default.string,shadow:o.default.bool,underline:o.default.bool,disabled:o.default.bool,children:o.default.oneOfType([o.default.arrayOf(o.default.object.node),o.default.node.isRequired])};const f=({style:e,className:t,type:n,value:a,text:o,fontSize:l,onChange:d,...s})=>r.default.createElement("div",{style:{display:"flex",position:"relative",flexDirection:"column",textAlign:"center",padding:"1.2em 0 .2em 0",fontSize:l,fontFamily:"unset",...e},className:`king-ui-input ${t}`},r.default.createElement("input",i({style:{width:"100%",textAlign:"center",fontSize:"1em",fontFamily:"unset",border:"none",borderBottom:"var(--theme-border-width) var(--theme-border-style) var(--theme-border-color)",borderRadius:"var(--theme-border-radius)",background:"var(--theme-input-background)",color:"var(--theme-input-color)"},type:n,value:a,onChange:d},s)),r.default.createElement(u,{style:{position:"absolute",pointerEvents:"none",width:"100%",top:"50%",transition:"transform .25s ease",fontSize:".9em"},shadow:!!a||(0===a||!1)},o));f.defaultProps={fontSize:"unset",type:"text"},f.propTypes={style:o.default.object,className:o.default.string,type:o.default.string,value:o.default.oneOfType([o.default.string,o.default.number]),text:o.default.string,fontSize:o.default.string,onChange:o.default.func};const c=()=>{let e=window.screen.availHeight;return e=window.screen.availWidth<e?window.screen.availWidth:window.screen.availHeight,e/1080>1?e/1080*16+"px":e/1080*16*(e/1080*2.5<=1?2.5:1)+"px"},p=({style:e,className:t,fontSize:n,children:a,...o})=>r.default.createElement("div",i({style:{position:"relative",userSelect:"none",background:"unset",color:"unset",fontSize:n||c(),fontFamily:"unset",...e},className:t},o),a);p.propTypes={style:o.default.object,className:o.default.string,fontSize:o.default.string,children:o.default.oneOfType([o.default.arrayOf(o.default.object.node),o.default.node.isRequired])};const m=["NavMenuBar","NavMenuOverlay","NavMenuRelative"],y=({style:t,className:n,zIndex:a,fontSize:o,shadow:i,position:l,offset:s,icon:u,toggleMenu:f,children:c})=>{const[p,y]=e.useState(f),b=e.useRef(!0),g={tr:{top:s,right:s},tl:{top:s,left:s},br:{bottom:s,right:s},bl:{bottom:s,left:s}};if(c&&m.includes(c.displayName))throw new Error(`Invalid child for "Nav", expect one of '${m.join("', '")}'`);return e.useEffect((()=>{b.current?b.current=!1:y((e=>!e))}),[f]),r.default.createElement(r.default.Fragment,null,p&&c,r.default.createElement(d,{style:{position:"fixed",zIndex:a,fontSize:o||"unset",fontFamily:"unset",...g[l],...t},className:n,shadow:i,onClick:()=>y((e=>!e))},u))};y.defaultProps={position:"tr",offset:".5em",zIndex:500,fontSize:"1em",icon:r.default.createElement(n.FaAlignRight,{style:{fontSize:"none"}}),toggleMenu:!1},y.propTypes={style:o.default.object,className:o.default.string,zIndex:o.default.number,fontSize:o.default.string,shadow:o.default.bool,position:o.default.oneOf(["tr","tl","bl","br"]),offset:o.default.string,icon:o.default.node.isRequired,toggleMenu:o.default.bool,children:o.default.node};const b=({style:e,className:t,zIndex:n,space:a,children:o})=>r.default.createElement("div",{style:{display:"flex",position:"fixed",zIndex:n,flexDirection:"column",justifyContent:"center",alignItems:"center",fontSize:"unset",fontFamily:"unset",background:"var(--theme-nav-background)",top:0,left:0,width:"100vw",height:"100vh",...e},className:t},o instanceof Array?o.map(((e,t)=>r.default.createElement("div",{key:t,style:{padding:a}},e))):o);b.defaultProps={zIndex:500,space:"1em"},b.propTypes={style:o.default.object,className:o.default.string,zIndex:o.default.number,space:o.default.string,children:o.default.oneOfType([o.default.arrayOf(o.default.node.isRequired),o.default.node.isRequired])};const g=({active:t,children:n})=>{const[a,o]=e.useState(),i=e.useRef([]);return e.useEffect((()=>{i.current=n instanceof Array?n:[n]}),[n]),e.useEffect((()=>[o((()=>i.current.filter((e=>e.props.route===t))))]),[t]),r.default.createElement(r.default.Fragment,null,a)};g.propTypes={active:o.default.string.isRequired,children:o.default.oneOfType([o.default.arrayOf(o.default.node.isRequired),o.default.node.isRequired])};const h=({endpoint:t,event:n,callback:a})=>(e.useEffect((async()=>{}),[t,n,a]),null);h.defaultProps={endpoint:o.default.oneOfType([o.default.arrayOf(o.default.string),o.default.string]),selector:o.default.oneOfType([o.default.arrayOf(o.default.string),o.default.string]),event:o.default.string,callback:o.default.func};l(".king-ui-notify--error,.king-ui-notify--info,.king-ui-notify--warn{display:flex;flex-direction:column}");const v={},k={info:"king-ui-notify--info king-ui-card--info",warn:"king-ui-notify--warn king-ui-card--warn",error:"king-ui-notify--error kinf-ui-card--error"},x=({className:t,card:n,timeout:a,onClick:o,...l})=>(e.useEffect((()=>{setTimeout((()=>{}),a)}),[a]),r.default.createElement("div",i({style:{display:"flex",flexDirection:"column"},className:t,onClick:o},l),n.title&&r.default.createElement(u,{style:{margin:".5em"},fontSize:"1.3em",shadow:!0,underline:!0},n.title),n.message&&r.default.createElement(u,{style:{margin:".5em"},fontSize:".9em"},n.message)));x.propTypes={className:o.default.string,card:o.default.object,timeout:o.default.number,onClick:o.default.func};const w=({id:t})=>{const n=e.useState(!1)[1],a=e.useRef([]),o=e.useRef(null);return e.useEffect((()=>(v[t]={container:o,addCard:e=>{a.current.unshift(e),n((e=>!e))},cards:a,removeCard:e=>{let t=-1;for(const n of a.current)if(t++,n.props.cardid===e)break;a.current.splice(t,1),n((e=>!e))}},()=>{delete v[t]})),[t]),r.default.createElement("div",{id:t,style:{display:a.current.length?"flex":"none",position:"absolute",flexDirection:"column",top:"0",left:"0",overflowY:"auto",zIndex:999},ref:o},a.current)};w.defaultProps={id:"king-ui-notify"},w.propTypes={id:o.default.string},exports.Button=d,exports.IOService=h,exports.Input=f,exports.Nav=y,exports.NavMenuOverlay=b,exports.NotifyContainer=w,exports.Root=p,exports.Router=g,exports.Text=u,exports.ToggleSwitch=s,exports.notify=({title:e=null,message:t,level:n="info",id:a="king-ui-notify",props:o={}}={})=>{const i=k[n];if(!i)throw new Error(`Unknown level "${n}"`);const l=v[a].cards.current.length,d={id:l,title:e,message:t};v[a].addCard(r.default.createElement(x,{cardid:l,key:l,className:i,card:d,timeout:6e3,onClick:()=>v[a].removeCard(l)}))};
