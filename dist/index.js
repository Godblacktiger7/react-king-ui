"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("prop-types"),n=require("react-icons/fa"),o=require("socket.io-client");function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=a(e),i=a(t),l=a(o);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function s(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&o.firstChild?o.insertBefore(a,o.firstChild):o.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}s(".king-ui-btn{background:var(--theme-background);color:var(--theme-color);border:var(--theme-border-width) var(--theme-border-style) var(--theme-border-color);border-radius:var(--theme-border-radius);font-size:unset;font-family:unset;cursor:pointer;user-select:none;padding:.35em .5em .2em}.king-ui-btn:hover{background:var(--theme-special--hover)}.king-ui-btn:active{background:var(--theme-special--active)}.king-ui-btn:focus{outline:0}.king-ui-btn--disabled{color:var(--theme-color--disabled);border-color:var(--theme-border-color--disabled);cursor:default}.king-ui-btn--disabled,.king-ui-btn--disabled:active,.king-ui-btn--disabled:hover{background:var(--theme-background--disabled)}");const u=({style:e,className:t,shadow:n,disabled:o,children:a,...i})=>{const l=["king-ui-btn",o?"king-ui-btn--disabled":"",t||""];return r.default.createElement("button",d({style:{boxShadow:n?o?"var(--theme-box-shadow--disabled)":"var(--theme-box-shadow)":"none",...e},className:l.join(" "),disabled:o},i),a)};u.propTypes={style:i.default.object,className:i.default.array,shadow:i.default.bool,disabled:i.default.bool,children:i.default.oneOfType([i.default.arrayOf(i.default.object.node),i.default.node.isRequired])};s("");const c=()=>r.default.createElement(r.default.Fragment,null);c.propTypes={};s('.king-ui-input input[type=number]::-webkit-inner-spin-button,.king-ui-input input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.king-ui-input input:focus{outline:0}.king-ui-input input:focus+span,.king-ui-input input:not([value=""])+span{transform:translateY(-1.5em)}');const f=({style:e,className:t,fontSize:n,shadow:o,underline:a,disabled:i,children:l,...s})=>r.default.createElement("span",d({style:{fontSize:n||"none",fontFamily:"unset",color:i?"var(--theme-color--disabled)":"var(--theme-color)",textDecoration:a?"underline":"none",textShadow:o?i?"var(--theme-text-shadow--disabled)":"var(--theme-text-shadow)":"none",...e},className:t},s),l);f.propTypes={style:i.default.object,className:i.default.string,fontSize:i.default.string,shadow:i.default.bool,underline:i.default.bool,disabled:i.default.bool,children:i.default.oneOfType([i.default.arrayOf(i.default.object.node),i.default.node.isRequired])};const p=({style:e,className:t,type:n,value:o,text:a,fontSize:i,onChange:l,...s})=>r.default.createElement("div",{style:{display:"flex",position:"relative",flexDirection:"column",textAlign:"center",padding:"1.2em 0 .2em 0",fontSize:i,fontFamily:"unset",...e},className:`king-ui-input ${t}`},r.default.createElement("input",d({style:{width:"100%",textAlign:"center",fontSize:"1em",fontFamily:"unset",border:"none",borderBottom:"var(--theme-border-width) var(--theme-border-style) var(--theme-border-color)",borderRadius:"var(--theme-border-radius)",background:"var(--theme-input-background)",color:"var(--theme-input-color)"},type:n,value:o,onChange:l},s)),r.default.createElement(f,{style:{position:"absolute",pointerEvents:"none",width:"100%",top:"50%",transition:"transform .25s ease",fontSize:".9em"},shadow:!!o||(0===o||!1)},a));p.defaultProps={fontSize:"unset",type:"text"},p.propTypes={style:i.default.object,className:i.default.string,type:i.default.string,value:i.default.oneOfType([i.default.string,i.default.number]),text:i.default.string,fontSize:i.default.string,onChange:i.default.func};const m=()=>{let e=window.screen.availHeight;return e=window.screen.availWidth<e?window.screen.availWidth:window.screen.availHeight,e/1080>1?e/1080*16+"px":e/1080*16*(e/1080*2.5<=1?2.5:1)+"px"},y=({style:e,className:t,fontSize:n,children:o,...a})=>r.default.createElement("div",d({style:{position:"relative",userSelect:"none",background:"unset",color:"unset",fontSize:n||m(),fontFamily:"unset",...e},className:t},a),o);y.propTypes={style:i.default.object,className:i.default.string,fontSize:i.default.string,children:i.default.oneOfType([i.default.arrayOf(i.default.object.node),i.default.node.isRequired])};const b=["NavMenuBar","NavMenuOverlay","NavMenuRelative"],g=({style:t,className:n,zIndex:o,fontSize:a,shadow:i,position:l,offset:d,icon:s,toggleMenu:c,children:f})=>{const[p,m]=e.useState(c),y=e.useRef(!0),g={tr:{top:d,right:d},tl:{top:d,left:d},br:{bottom:d,right:d},bl:{bottom:d,left:d}};if(f&&b.includes(f.displayName))throw new Error(`Invalid child for "Nav", expect one of '${b.join("', '")}'`);return e.useEffect((()=>{y.current?y.current=!1:m((e=>!e))}),[c]),r.default.createElement(r.default.Fragment,null,p&&f,r.default.createElement(u,{style:{position:"fixed",zIndex:o,fontSize:a||"unset",fontFamily:"unset",...g[l]||g.tr,...t},className:n,shadow:i,onClick:()=>m((e=>!e))},s))};g.defaultProps={position:"tr",offset:".5em",zIndex:500,fontSize:"1em",icon:r.default.createElement(n.FaAlignRight,{style:{fontSize:"none"}}),toggleMenu:!1},g.propTypes={style:i.default.object,className:i.default.string,zIndex:i.default.number,fontSize:i.default.string,shadow:i.default.bool,position:i.default.oneOf(["tr","tl","bl","br"]),offset:i.default.string,icon:i.default.node.isRequired,toggleMenu:i.default.bool,children:i.default.node};const h=({style:e,className:t,zIndex:n,space:o,children:a})=>r.default.createElement("div",{style:{display:"flex",position:"fixed",zIndex:n,flexDirection:"column",justifyContent:"center",alignItems:"center",fontSize:"unset",fontFamily:"unset",background:"var(--theme-nav-background)",top:0,left:0,width:"100vw",height:"100vh",...e},className:t},a instanceof Array?a.map(((e,t)=>r.default.createElement("div",{key:t,style:{padding:o}},e))):a);h.defaultProps={zIndex:500,space:"1em"},h.propTypes={style:i.default.object,className:i.default.string,zIndex:i.default.number,space:i.default.string,children:i.default.oneOfType([i.default.arrayOf(i.default.node.isRequired),i.default.node.isRequired])};const v=({active:t,children:n})=>{const[o,a]=e.useState(),i=e.useRef([]);return e.useEffect((()=>{i.current=n instanceof Array?n:[n]}),[n]),e.useEffect((()=>[a((()=>i.current.filter((e=>e.props.route===t))))]),[t]),r.default.createElement(r.default.Fragment,null,o)};v.propTypes={active:i.default.string.isRequired,children:i.default.oneOfType([i.default.arrayOf(i.default.node.isRequired),i.default.node.isRequired])};const x={},k=({endpoint:t,...n})=>(e.useEffect((async()=>{const e=x[t]||{client:l.default(t)};e.client.connected||(console.log(`io endpoint ("${t}") is not connected`),console.log("connect ..."),e.client.connect(t));for(const[t,o]of Object.entries(n))e.on(t,o);x[t]=e}),[t,n]),e.useEffect((()=>()=>{x[t]&&(x[t].client.connected&&(console.log("disconnect from:",t),x[t].client.disconnect()),delete x[t])})),null);k.defaultProps={endpoint:i.default.oneOfType([i.default.arrayOf(i.default.string),i.default.string])};s(".king-ui-notify--error,.king-ui-notify--info,.king-ui-notify--warn{display:flex;flex-direction:column}");const w={},N={info:"king-ui-notify--info king-ui-card--info",warn:"king-ui-notify--warn king-ui-card--warn",error:"king-ui-notify--error kinf-ui-card--error"},z=({className:t,card:n,timeout:o,onClick:a,...i})=>(e.useEffect((()=>{setTimeout((()=>{}),o)}),[o]),r.default.createElement("div",d({style:{display:"flex",flexDirection:"column"},className:t,onClick:a},i),n.title&&r.default.createElement(f,{style:{margin:".5em"},fontSize:"1.3em",shadow:!0,underline:!0},n.title),n.message&&r.default.createElement(f,{style:{margin:".5em"},fontSize:".9em"},n.message)));z.propTypes={className:i.default.string,card:i.default.object,timeout:i.default.number,onClick:i.default.func};const E=({style:t,id:n,...o})=>{const a=e.useState(!1)[1],i=e.useRef([]),l=e.useRef(null);return e.useEffect((()=>(w[n]={container:l,addCard:e=>{i.current.unshift(e),a((e=>!e))},cards:i,removeCard:e=>{let t=-1;for(const n of i.current)if(t++,n.props.cardid===e)break;i.current.splice(t,1),a((e=>!e))}},()=>{delete w[n]})),[n]),r.default.createElement("div",{id:n,style:{display:i.current.length?"flex":"none",position:"absolute",flexDirection:"column",overflowY:"auto",zIndex:999,width:"100%",maxWidth:"30ch",...t},ref:l},i.current)};E.defaultProps={id:"king-ui-notify"},E.propTypes={style:i.default.object,id:i.default.string},exports.Button=u,exports.IOHandler=k,exports.Input=p,exports.Nav=g,exports.NavMenuOverlay=h,exports.NotifyContainer=E,exports.Root=y,exports.Router=v,exports.Text=f,exports.ToggleSwitch=c,exports.notify=({title:e=null,message:t,level:n="info",id:o="king-ui-notify",...a}={})=>{const i=N[n];if(!i)throw new Error(`Unknown level "${n}"`);const l=w[o].cards.current.length,s={id:l,title:e,message:t};w[o].addCard(r.default.createElement(z,d({key:l,cardid:l,className:i,card:s,timeout:6e3,onClick:()=>w[o].removeCard(l)},a)))};
